<!DOCTYPE html>
<html>
  <head>
    <!-- 1. Load platform.js for polyfill support. -->
    <script src="bower_components/platform/platform.js"></script>

    <!-- 2. Use an HTML Import to bring in the element. -->
    <link rel="import" href="bower_components/core-ajax/core-ajax.html">
    <link rel="import" href="bower_components/paper-tabs/paper-tabs.html">
    <link rel="import" href="bower_components/core-toolbar/core-toolbar.html">
    <link rel="import" href="bower_components/core-icons/core-icons.html">
    <link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
    <link rel="import" href="bower_components/font-roboto/roboto.html">
    <link rel="import" href="bower_components/paper-menu-button/paper-menu-button.html" >
    <link rel="import" href="bower_components/paper-item/paper-item.html">
    <link rel="import" href="bower_components/core-animated-pages/core-animated-pages.html">
    <link rel="import" href="bower_components/core-animated-pages/transitions/slide-from-bottom.html">
    <link rel="import" href="bower_components/core-animated-pages/transitions/slide-down.html">
    <link rel="import" href="bower_components/core-animated-pages/transitions/slide-up.html">
    <link rel="import" href="bower_components/core-animated-pages/transitions/slide-from-right.html">
    <link rel="import" href="bower_components/core-a11y-keys/core-a11y-keys.html">


    <link href="css/style.css" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/index.css" rel="stylesheet">

  </head>
  <body>

    <template is="auto-binding">

      <core-ajax id="ajax" auto url="{{selectedPage.page.url}}" handleAs="document"
                 on-core-response="{{onResponse}}"></core-ajax>

      <core-a11y-keys target="{{parentElement}}"
       keys="up down left right space space+shift"
       on-keys-pressed="{{keyHandler}}">
      </core-a11y-keys>


      <nav>
        <core-toolbar class="medium-tall" tool flex>

          <div flex>Sijie Tian</div>
          <paper-icon-button icon="more-vert"></paper-icon-button>

          <div class="bottom fit" id="banner" horizontal layout>
            <paper-tabs flex style="max-width: 600px;" valueattr="hash" selected="{{route}}" selectedModel="{{selectedPage}}" on-click="{{ajaxLoad}}">
              <template repeat="{{page in pages}}">
                <paper-item label="{{page.name}}" hash="{{page.hash}}">
                  <a href="{{page.url}}"></a>
                </paper-item>
              </template>
            </paper-tabs>
          </div>

        </core-toolbar>
      </nav>

      <div layout vertical>
        <core-animated-pages id="pages"  valueattr="hash" selected="{{route}}" transitions="cross-fade">
          <template repeat="{{page in pages}}">
            <section hash="{{page.hash}}" layout vertical center-center>
              <div cross-fade style="max-width:100%;"></div>
            </section>
          </template>
        </core-animated-pages>
      </div>

    </template>



    <script>
      "use strict";
      var template = document.querySelector('template[is=auto-binding]');

      template.pages = [
        {name: 'Home', hash: 'ho', url: 'pages/home.html'},
        {name: 'About', hash: 'ab', url: 'pages/about.html'},
        {name: 'Portfolio', hash: 'po', url: 'pages/portfolio.html'},
        {name: 'Resume', hash: 're', url: 'pages/resume.html'}
      ];

      template.keyHandler = function(e, detail, sender) {
        var pages = document.querySelector('#pages');

        switch (detail.key) {
          case 'left':
          case 'up':
            pages.selectPrevious();
            break;
          case 'right':
          case 'down':
            pages.selectNext();
            break;
          case 'space':
            detail.shift ? pages.selectPrevious() : pages.selectNext();
            break;
        }
      };
      //var ajax = document.querySelector('#ajax');

      template.ajaxLoad = function(e, detail, sender) {
        e.preventDefault(); // prevent link navigation.
      };

      template.onResponse = function(e, detail, sender) {
        var article = detail.response.querySelector('.container');
        var html = article.innerHTML;

        var pages = document.querySelector('#pages');
        this.injectBoundHTML(html, pages.selectedItem.firstElementChild);
      };

    </script>
    <script src="js/core.js" ></script>
  </body>

</html>
